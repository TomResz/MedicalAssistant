@page "/visit/{VisitId:guid}"
@using MedicalAssistant.UI.Components
@using MedicalAssistant.UI.Components.VisitAttachment
@using MedicalAssistant.UI.Components.VisitNotification
@using MedicalAssistant.UI.Components.Visits


<PageTitle>@Translations.VisitDetails</PageTitle>

<MudGrid Class="ma-0 visit-grid">
	<MudItem xs="12" md="6" Class="pa-0 mx-0 visit-item">
		<MudCard Class="visit-card">
			@if (_isVisitLoading)
			{
				<LoadingSkeletonComponent Class="ma-2" />
			}
			else
			{
				<VisitDetails Visit="Visit" />
			}
		</MudCard>
	</MudItem>

	<MudItem xs="12" md="6" Class="pa-0 mx-0 visit-item">
		<MudGrid Class="ma-0 d-flex flex-column" Style="min-height: calc(100vh - 104px); padding-right: 24px;">
			<MudItem xs="12" Class="px-0 pt-0 pb-1 ma-0 mb-0 flex-1 d-flex flex-column" Style="height:50vh; max-height: 50vh; overflow-y: auto;">
				<MudPaper Class="visit-card h-100 flex-1 d-flex flex-column">
					@if (_areNotificationLoading)
					{
						<LoadingSkeletonComponent Class="ma-2 flex-1" />
					}
					else
					{
						<VisitNotificationList Notifications="_visitNotifications" VisitId="@VisitId" />
					}
				</MudPaper>
			</MudItem>
			<MudItem xs="12" Class="px-0 pt-1 pb-0 flex-1 d-flex flex-column " Style="height:50vh; max-height: 50vh; overflow-y: auto;">
				<MudPaper Class="visit-card h-100 flex-1 d-flex flex-column">
					@if (_areNotificationLoading)
					{
						<LoadingSkeletonComponent Class="ma-2 flex-1 " />
					}
					else
					{
						<VisitAttachmentList VisitId="@VisitId" />
					}
				</MudPaper>
			</MudItem>
		</MudGrid>
	</MudItem>
</MudGrid>


<style>
	.visit-grid {
		overflow-y: auto;
		overflow-x: hidden;
		max-height: calc(100vh - 96px);
	}

	.visit-item {
		min-height: calc(100vh - 104px);
		margin-top: 8px;
	}

	.visit-lef-item {
		margin-top: 8px;
	}

	.visit-card {
		height: 100%;
		margin-right: 24px;
	}

</style>