@using MedicalAssistant.UI.Models.Visits


<MudDialog TitleClass="text-center">
	<DialogContent>
		<MudForm @ref="form" Model="@_visitModel" Validation="@(_validator.ValidateValue)" ValidationDelay="80">
			<MudGrid>
				<MudItem xs="12" sm="6">
					<MudTextField Label="@Translations.DoctorName"
								  @bind-Value="_visitModel.DoctorName"
								  For="@(()=> _visitModel.DoctorName)" />
				</MudItem>
				<MudItem xs="12" sm="6">
					<MudTextField Label="@Translations.VisitType" @bind-Value="_visitModel.VisitType"
								  For="@(() => _visitModel.VisitType)" />
				</MudItem>
				<MudItem xs="12">
					<MudTextField Label="@Translations.Description" @bind-Value="_visitModel.VisitDescription" AutoGrow MaxLines="3"
									  For="@(() => _visitModel.VisitDescription)" />
					</MudItem>
					<MudItem xs="12">
						<MudTextField Label="@Translations.Street" @bind-Value="_visitModel.Street"
									  For="@(() => _visitModel.Street)" />
					</MudItem>
					<MudItem xs="12" sm="6">
						<MudTextField Label="@Translations.PostalCode" @bind-Value="_visitModel.PostalCode" Mask="@postalCodeMask"
									  For="@(() => _visitModel.PostalCode)" />
					</MudItem>
					<MudItem xs="12" sm="6">
						<MudTextField Label="@Translations.City" @bind-Value="_visitModel.City"
									  For="@(() => _visitModel.City)" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudDatePicker PickerVariant="PickerVariant.Dialog" Label="@Translations.Date" Editable="true" @bind-Date="_visitModel.Date"
									   Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy"
									   For="@(() => _visitModel.Date)" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudTimePicker PickerVariant="PickerVariant.Dialog" Label="@Translations.Time" @bind-Time="_visitModel.Time"
									   For="@(() => _visitModel.Time)" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudTextField T="TimeSpan?" Label="@Translations.VisitPredictedTime" InputType="InputType.Time" @bind-Value="_visitModel.PredictedEndDate"
									  For="@(() => _visitModel.PredictedEndDate)" />
					</MudItem>
				</MudGrid>
			</MudForm>
		</DialogContent>
		<DialogActions>
			<MudGrid>

				<MudItem xs="12" sm="6" Class="d-flex flex-column">
					<MudButton OnClick="@( async () =>  await BtnPressed())" Variant="MudBlazor.Variant.Filled" FullWidth="true"
							   Color="Color.Primary" Disabled="@_btnPressed">@Translations.Edit</MudButton>
				</MudItem>

				<MudItem xs="12" sm="6" Class="d-flex flex-column">
					<MudButton OnClick="@( async () => await DeleteVisit())" Variant="MudBlazor.Variant.Filled"
							   Color="Color.Error" FullWidth="true"
							   >@Translations.Delete </MudButton>
				</MudItem>

				<MudItem xs="12" sm="6" Class="d-flex flex-column">
					<MudButton OnClick="ShowDetails" Variant="MudBlazor.Variant.Filled" FullWidth="true"
						>@Translations.ShowDetails</MudButton>
				</MudItem>

				<MudItem xs="12" sm="6" Class="d-flex flex-column">
					<MudButton OnClick="Cancel" Variant="MudBlazor.Variant.Filled" FullWidth="true">@Translations.Cancel</MudButton>
				</MudItem>

			</MudGrid>
		</DialogActions>
	</MudDialog>