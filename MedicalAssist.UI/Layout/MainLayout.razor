@using MedicalAssist.UI.Components
@using MedicalAssist.UI.Components.AppBar
@using MedicalAssist.UI.Pages.Dashboard
@inherits LayoutComponentBase
@layout BaseLayout
@inject MedicalAssist.UI.Shared.Services.Auth.LocalStorageService LocalStorage
@inject IJSRuntime JSRuntime

<MudLayout>
	<MudAppBar Elevation="0">
		<MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@(e => DrawerToggle())" />
		<MudSpacer />
		<LanguageSwitchBtn Class="mx-1"/>
		<AccountMenu />
		<MudIconButton Icon="@(BaseLayout.IsDarkMode ?  Icons.Material.Filled.Nightlight : Icons.Material.Filled.Brightness4)"
					   Color="Color.Inherit"
					   Class="nav-button ml-1"
					   OnClick="@(async () => await BaseLayout.ThemeToggle())" />
	</MudAppBar>
	<MudDrawer @bind-Open="_drawerOpen" Elevation="1">
		<MudDrawerHeader>
			<img src="/Logo.svg" style="transform: scale(1.8); margin-right:10px">
			<MudText Typo="Typo.h6">@Translations.MedicalAssist</MudText>
		</MudDrawerHeader>
		<NavMenu />
	</MudDrawer>
	<MudMainContent>
		<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="pa-4">
			@Body
		</MudContainer>
	</MudMainContent>
</MudLayout>

@code {
	bool _drawerOpen = true;
	[CascadingParameter] BaseLayout BaseLayout { get; set; }
	void DrawerToggle() => _drawerOpen = !_drawerOpen;

}