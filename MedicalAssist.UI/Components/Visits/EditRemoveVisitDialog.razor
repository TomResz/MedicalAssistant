@using MedicalAssist.UI.Models.Visits


<MudDialog>
	<DialogContent>
		<MudForm @ref="form" Model="@_visitModel">
			<MudGrid>
				<MudItem xs="12" sm="6">
					<MudTextField Label="@Translations.DoctorName" @bind-Value="_visitModel.DoctorName" Required="true" ReadOnly="@_readOnlyMode" />
				</MudItem>
				<MudItem xs="12" sm="6">
					<MudTextField Label="@Translations.VisitType" @bind-Value="_visitModel.VisitType" Required="true" ReadOnly="@_readOnlyMode" />
				</MudItem>
				<MudItem xs="12">
					<MudTextField Label="@Translations.Description" @bind-Value="_visitModel.VisitDescription" AutoGrow MaxLines="3" Required="true"
									  ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12">
						<MudTextField Label="@Translations.Street" @bind-Value="_visitModel.Street" Required="true" ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12" sm="6">
						<MudTextField Label="@Translations.PostalCode" @bind-Value="_visitModel.PostalCode" Mask="@postalCodeMask" Clearable Required="true"
									  ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12" sm="6">
						<MudTextField Label="@Translations.City" @bind-Value="_visitModel.City" Required="true" ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudDatePicker PickerVariant="PickerVariant.Dialog" Label="@Translations.Date" Editable="true" @bind-Date="_visitModel.Date"
									   Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy" Placeholder="dd/MM/yyyy"
									   Required="true" ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudTimePicker PickerVariant="PickerVariant.Dialog" Label="@Translations.Time" @bind-Time="_visitModel.Time" ReadOnly="@_readOnlyMode" />
					</MudItem>
					<MudItem xs="12" sm="4">
						<MudTextField T="TimeSpan?" Label="@Translations.VisitPredictedTime" InputType="InputType.Time" @bind-Value="_visitModel.PredictedEndDate"
									  ReadOnly="@_readOnlyMode" />
					</MudItem>
				</MudGrid>
			</MudForm>
		</DialogContent>
		<DialogActions>
			<MudButton OnClick="@( async () =>  await BtnPressed())" Variant="MudBlazor.Variant.Filled"
					   Color="Color.Primary">@(!_isEditMode ? Translations.GoToEditMode : Translations.Edit )</MudButton>
			<MudButton OnClick="@( async () => await DeleteVisit())" Variant="MudBlazor.Variant.Filled"
					   Color="Color.Error">@Translations.Delete </MudButton>
			<MudButton OnClick="Cancel" Variant="MudBlazor.Variant.Filled">@Translations.Cancel</MudButton>
		</DialogActions>
	</MudDialog>