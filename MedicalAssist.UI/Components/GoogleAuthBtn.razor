@using MedicalAssist.UI.Shared.Options
@using MedicalAssist.UI.Shared.Response
@using MedicalAssist.UI.Shared.Services.Abstraction
@using MedicalAssist.UI.Shared.Services.Auth
@using System.Web
@using Microsoft.Extensions.Options
@inject IUserAuthService UserAuthService
@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider
<MudButton StartIcon="@Icons.Custom.Brands.Google"
		   Variant="MudBlazor.Variant.Filled" Color="Color.Primary"
		   OnClick=" LoginWithGoogle"
		   IconSize="Size.Large"
		   FullWidth="true">
	Google
</MudButton>


@code {
	[Inject]
	private NavigationManager _navigation { get; set; }

	[Inject]
	private IOptions<GoogleOptions> _options { get; set; }

	void LoginWithGoogle()
	{
		string redirectUri = HttpUtility.UrlEncode(_options.Value.CallbackPath);
		string clientId = _options.Value.ClientId;

		string fullUri = $"https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&client_id={clientId}&redirect_uri={redirectUri}&response_type=code&scope=email%20profile&prompt=consent";

		_navigation.NavigateTo(fullUri);
	}
}