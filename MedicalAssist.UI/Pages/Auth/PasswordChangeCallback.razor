@page "/password-change"
@using MedicalAssist.UI.Components
@if (_loading)
{
	<LoadingComponent />
}
else
{
	<MudForm @ref="_form" Model="_model" Validation="@(_validator.ValidateValue)" ValidationDelay="60" Class="mx-0 px-0">
		<MudCardContent>
			<MudText Align="@Align.Center" Typo="Typo.h4" Color="Color.Primary">@Translations.PasswordChangeLabel</MudText>
				<MudTextField @bind-Value="_model.Password"
							  Label="@Translations.Password" InputType="@passwordInputType"
							  Adornment="Adornment.End" AdornmentIcon="@passwordIcon"
							  OnAdornmentClick="TogglePasswordVisibility"
							  Variant="MudBlazor.Variant.Filled"
							  Class="mb-2 py-2"
							  Immediate="true"
							  For="@(()=> _model.Password)" />
				<MudTextField @bind-Value="_model.ConfirmedPassword"
							  Label="@Translations.ConfirmedPassword" InputType="@confirmedPasswordInputType"
							  Adornment="Adornment.End" AdornmentIcon="@confirmedPasswordIcon"
							  OnAdornmentClick="ToggleConfirmedPasswordVisibility"
							  Variant="MudBlazor.Variant.Filled"
							  Class="mb-2 py-2"
							  Immediate="true"
							  For="@(()=> _model.ConfirmedPassword)" />

				<MudCardActions Class="px-0">
					<MudGrid Justify="Justify.Center">
						<MudItem xs="12">
							<MudButton Variant="MudBlazor.Variant.Filled"
									   Color="Color.Primary" OnClick="@(async () => await ChangePassword())"
									   StartIcon="@Icons.Material.Filled.Login"
									   IconSize="Size.Large"
									   FullWidth="true"
									   Disabled="_btnPressed">
								@Translations.PasswordChangeBtnLabel
							</MudButton>
						<br />
						<MudText Align="Align.Center" Typo="Typo.subtitle1" Class="mt-3">
							<MudLink Href="/login" Color="Color.Primary">
								@Translations.RegisterPageLoginLink
							</MudLink>
						</MudText>
					</MudItem>
				</MudGrid>
			</MudCardActions>
		</MudCardContent>
	</MudForm>
}